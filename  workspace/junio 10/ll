import tkinter as tk
from tkinter import messagebox
import random

class AppMultiplicacion:
    def __init__(self, master):
        self.master = master
        self.master.title("Práctica de Tablas de Multiplicar")
        self.master.geometry("400x300")
        self.tabla = tk.IntVar()
        self.pregunta_actual = ""
        self.respuesta_correcta = 0
        self.puntaje = 0
        self.preguntas_respondidas = 0
        self.total_preguntas = 10

        self.crear_widgets()

    def crear_widgets(self):
        self.label_intro = tk.Label(self.master, text="Elige la tabla a practicar:", font=("Arial", 12))
        self.label_intro.pack(pady=10)

        self.entrada_tabla = tk.Entry(self.master, textvariable=self.tabla, width=5, font=("Arial", 14))
        self.entrada_tabla.pack()

        self.boton_empezar = tk.Button(self.master, text="Empezar", command=self.empezar_practica)
        self.boton_empezar.pack(pady=10)

        self.label_pregunta = tk.Label(self.master, text="", font=("Arial", 16))
        self.label_pregunta.pack(pady=10)

        self.entrada_respuesta = tk.Entry(self.master, font=("Arial", 14))
        self.entrada_respuesta.pack()

        self.boton_responder = tk.Button(self.master, text="Responder", command=self.verificar_respuesta)
        self.boton_responder.pack(pady=10)

    def empezar_practica(self):
        try:
            valor = self.tabla.get()
            if 1 <= valor <= 12:
                self.puntaje = 0
                self.preguntas_respondidas = 0
                self.siguiente_pregunta()
            else:
                messagebox.showwarning("Valor inválido", "Ingresa un número entre 1 y 12.")
        except:
            messagebox.showerror("Error", "Entrada no válida.")

    def siguiente_pregunta(self):
        if self.preguntas_respondidas >= self.total_preguntas:
            messagebox.showinfo("Finalizado", f"Puntaje final: {self.puntaje}/{self.total_preguntas}")
            self.label_pregunta.config(text="")
            return

        numero = random.randint(1, 10)
        self.respuesta_correcta = self.tabla.get() * numero
        self.label_pregunta.config(text=f"{self.tabla.get()} x {numero} = ?")
        self.entrada_respuesta.delete(0, tk.END)
        self.preguntas_respondidas += 1

    def verificar_respuesta(self):
        try:
            respuesta = int(self.entrada_respuesta.get())
            if respuesta == self.respuesta_correcta:
                self.puntaje += 1
                messagebox.showinfo("✅ Correcto", "¡Bien hecho!")
            else:
                messagebox.showwarning("❌ Incorrecto", f"La respuesta correcta era: {self.respuesta_correcta}")
            self.siguiente_pregunta()
        except ValueError:
            messagebox.showerror("Error", "Debes escribir un número.")

# Ejecutar la app
if __name__ == "__main__":
    root = tk.Tk()
    app = AppMultiplicacion(root)
    root.mainloop()